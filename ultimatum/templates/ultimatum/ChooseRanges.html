{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Choose Intervals
{% endblock %}

{% block app_styles %}

    <style type="text/css">
        #reject_amount, #accept_amount {
            border: 0;
            color: #f6931f;
            font-weight: bold;
            position: relative;
            top: 50%;
            left: 50%;
            text-align: center;
            transform: translate(-50%, -50%);
        }

        .indifferent {
            border: 0;
            color: #f6931f;
            font-weight: bold;
            text-align: center;
            width: 15%;
        }

        .slider_right {
            display: inline-block;
            float: right
        }

        .slider_left {
            display: inline-block;
            float: left
        }
    </style>

{% endblock %}

{% block content %}

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <script>
        $(function () {
            $("#reject-range").slider({
                range: "max",
                min: 0,
                max: 100,
                values: [100],
                slide: function (event, ui) {
                    $(".reject_amount").val('$' + ui.values[0]); // renders the current value when moving the handle
                    $("#id_max_reject").val(ui.values[0]); //pass the value from the slider to the player's attribute based on the model field name
                }
            });
            $(".reject_amount").val('$' + $("#reject-range").slider("values", 0)); // renders the slider's value
        });

        $(function () {
            $("#accept-range").slider({
                range: "min",
                min: 0,
                max: 100,
                values: [0],
                slide: function (event, ui) {
                    $(".accept_amount").val("$" + ui.values[0]); // renders the slider's current value when moving the handle
                    $("#id_min_accept").val(ui.values[0]); //pass the value from the slider to the player's attribute based on the model field name
                }
            });
            $(".accept_amount").val("$" + $("#accept-range").slider("values", 0)); // renders the slider's value
        });

        // load the modal after the DOM is ready. Otherwise it will not be displayed.
        $(document).ready(function () {
            $(function () {
                $('#exampleModal').modal();
            });
        });

    </script>

    <!-- Boootstrap Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">System Message</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{ player.message }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <br>
    <label>What is the biggest offer you would ABSOLUTELY reject?</label>
    <br>
    <br>
    {# displays the biggest offer the player would absolutely reject #}
    <input id="reject_amount" class="reject_amount" readonly>

    <br>

    <div>
        {# this div is the slider for the biggest offer the player would absolutely reject #}
        <div id="reject-range"></div>
        {# render the input fields as hidden to pass the value there from the slider using their id, based on the model field name #}
        {{ form.max_reject.as_hidden }}
        <span class="slider_left">$0</span>
        <span class="slider_right">$100</span>
    </div>


    <br>
    <br>

    <label>What is the smallest offer you would ABSOLUTELY accept?</label>
    <br>
    <br>
    {# displays the smallest offer the player would absolutely accept #}
    <input id="accept_amount" class="accept_amount" readonly>
    <br>

    <div>
        {# this div is the slider for the biggest offer the player would absolutely reject #}
        <div id="accept-range"></div>
        {# render the input fields as hidden to pass the value there from the slider using their id, based on the model field name #}
        {{ form.min_accept.as_hidden }}
        <span class="slider_left">$0</span>
        <span class="slider_right">$100</span>
    </div>

    <br>
    <br>

    <label>You are indifferent between
        <input readonly class="reject_amount indifferent"> and
        <input readonly class="accept_amount indifferent"></label>
    <br>
    <br>


    {% next_button %}

    {% include Constants.instructions_template %}

{% endblock %}
